package main

import (
	"fmt"
	"strings"
	"testing"
	"time"

	"github.com/function61/gokit/assert"
)

func TestFloorTenMinutes(t *testing.T) {
	ts := func(h, m int) time.Time {
		return time.Date(2020, 6, 7, h, m, 0, 0, time.UTC)
	}

	// one item to start result with a newline
	output := []string{""}
	for i := 0; i < 60; i++ {
		input := ts(13, i) // 13:00, 13:01, ... 13:59
		output = append(output, fmt.Sprintf(
			"%s => %s",
			input.Format("15:04"),
			floorTenMinutes(input).Format("15:04")))
	}

	assert.EqualString(t, strings.Join(output, "\n"), `
13:00 => 13:00
13:01 => 13:00
13:02 => 13:00
13:03 => 13:00
13:04 => 13:00
13:05 => 13:00
13:06 => 13:00
13:07 => 13:00
13:08 => 13:00
13:09 => 13:00
13:10 => 13:10
13:11 => 13:10
13:12 => 13:10
13:13 => 13:10
13:14 => 13:10
13:15 => 13:10
13:16 => 13:10
13:17 => 13:10
13:18 => 13:10
13:19 => 13:10
13:20 => 13:20
13:21 => 13:20
13:22 => 13:20
13:23 => 13:20
13:24 => 13:20
13:25 => 13:20
13:26 => 13:20
13:27 => 13:20
13:28 => 13:20
13:29 => 13:20
13:30 => 13:30
13:31 => 13:30
13:32 => 13:30
13:33 => 13:30
13:34 => 13:30
13:35 => 13:30
13:36 => 13:30
13:37 => 13:30
13:38 => 13:30
13:39 => 13:30
13:40 => 13:40
13:41 => 13:40
13:42 => 13:40
13:43 => 13:40
13:44 => 13:40
13:45 => 13:40
13:46 => 13:40
13:47 => 13:40
13:48 => 13:40
13:49 => 13:40
13:50 => 13:50
13:51 => 13:50
13:52 => 13:50
13:53 => 13:50
13:54 => 13:50
13:55 => 13:50
13:56 => 13:50
13:57 => 13:50
13:58 => 13:50
13:59 => 13:50`)
}
